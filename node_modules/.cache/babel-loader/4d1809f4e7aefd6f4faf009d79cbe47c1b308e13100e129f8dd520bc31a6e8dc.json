{"ast":null,"code":"var _jsxFileName = \"D:\\\\cac ngon ngu\\\\ReactJs\\\\baitap1\\\\src\\\\views\\\\Context\\\\Context.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { createContext } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ThemeContext = /*#__PURE__*/createContext();\nconst Context = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [loading, setLoading] = useState(true);\n  const [data, setData] = useState([]);\n  const [total, setTotal] = useState(0);\n  useEffect(() => {\n    try {\n      (async function () {\n        let arr = [];\n        let page = 1;\n        let res = await axios.get(`https://swapi.dev/api/starships/?page=${page}`);\n        let data = res && res.data ? res.data : [];\n        arr = arr.concat(data.results);\n        if (data.next) {\n          page += 1;\n          let res = await axios.get(`https://swapi.dev/api/starships/?page=${page}`);\n          arr = arr.concat(res.data.results);\n          if (data.next) {\n            page += 1;\n            let res = await axios.get(`https://swapi.dev/api/starships/?page=${page}`);\n            arr = arr.concat(res.data.results);\n            if (res.data.next) {\n              page += 1;\n              let res = await axios.get(`https://swapi.dev/api/starships/?page=${page}`);\n              arr = arr.concat(res.data.results);\n              console.log(\"array 4:\", page, arr);\n              setData(arr);\n            } else {\n              console.log(\"đã hết api\");\n              return arr;\n            }\n          }\n        }\n        setData(arr);\n        // console.log(\"loadding1: \", loading);\n        setLoading(false);\n        // console.log(\"loadding2: \", loading);\n      })();\n    } catch (error) {\n      console.log(error);\n    }\n  }, [total === 0]);\n  return /*#__PURE__*/_jsxDEV(ThemeContext.Provider, {\n    value: {\n      data,\n      total,\n      loading,\n      setTotal\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(Context, \"1zEp/nz50CCw/9ah/CAxdnm277o=\");\n_c = Context;\nexport { Context, ThemeContext };\nvar _c;\n$RefreshReg$(_c, \"Context\");","map":{"version":3,"names":["axios","React","useEffect","useState","createContext","jsxDEV","_jsxDEV","ThemeContext","Context","_ref","_s","children","loading","setLoading","data","setData","total","setTotal","arr","page","res","get","concat","results","next","console","log","error","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/cac ngon ngu/ReactJs/baitap1/src/views/Context/Context.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { createContext } from \"react\";\r\n\r\nconst ThemeContext = createContext();\r\nconst Context = ({ children }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  useEffect(() => {\r\n    try {\r\n      (async function () {\r\n        let arr = [];\r\n        let page = 1;\r\n        let res = await axios.get(\r\n          `https://swapi.dev/api/starships/?page=${page}`\r\n        );\r\n        let data = res && res.data ? res.data : [];\r\n        arr = arr.concat(data.results);\r\n        if (data.next) {\r\n          page += 1;\r\n          let res = await axios.get(\r\n            `https://swapi.dev/api/starships/?page=${page}`\r\n          );\r\n          arr = arr.concat(res.data.results);\r\n          if (data.next) {\r\n            page += 1;\r\n            let res = await axios.get(\r\n              `https://swapi.dev/api/starships/?page=${page}`\r\n            );\r\n            arr = arr.concat(res.data.results);\r\n            if (res.data.next) {\r\n              page += 1;\r\n              let res = await axios.get(\r\n                `https://swapi.dev/api/starships/?page=${page}`\r\n              );\r\n              arr = arr.concat(res.data.results);\r\n              console.log(\"array 4:\", page, arr);\r\n              setData(arr);\r\n            } else {\r\n              console.log(\"đã hết api\");\r\n              return arr;\r\n            }\r\n          }\r\n        }\r\n        setData(arr);\r\n        // console.log(\"loadding1: \", loading);\r\n        setLoading(false);\r\n        // console.log(\"loadding2: \", loading);\r\n      })();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, [total === 0]);\r\n  return (\r\n    <ThemeContext.Provider value={{ data, total, loading, setTotal }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nexport { Context, ThemeContext };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}